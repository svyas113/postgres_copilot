2025-06-17 15:04:40,596 - INFO - __main__ - PostgreSQL MCP Server script started.
2025-06-17 15:04:40,597 - INFO - __main__ - Creating FastMCP instance for PostgreSQL server...
2025-06-17 15:04:40,598 - DEBUG - mcp.server.lowlevel.server - Initializing server 'PostgreSQLServer'
2025-06-17 15:04:40,598 - DEBUG - mcp.server.lowlevel.server - Registering handler for ListToolsRequest
2025-06-17 15:04:40,599 - DEBUG - mcp.server.lowlevel.server - Registering handler for CallToolRequest
2025-06-17 15:04:40,599 - DEBUG - mcp.server.lowlevel.server - Registering handler for ListResourcesRequest
2025-06-17 15:04:40,599 - DEBUG - mcp.server.lowlevel.server - Registering handler for ReadResourceRequest
2025-06-17 15:04:40,599 - DEBUG - mcp.server.lowlevel.server - Registering handler for PromptListRequest
2025-06-17 15:04:40,599 - DEBUG - mcp.server.lowlevel.server - Registering handler for GetPromptRequest
2025-06-17 15:04:40,599 - DEBUG - mcp.server.lowlevel.server - Registering handler for ListResourceTemplatesRequest
2025-06-17 15:04:40,599 - INFO - __main__ - FastMCP instance created.
2025-06-17 15:04:40,601 - INFO - __main__ - PostgreSQL MCP tools defined.
2025-06-17 15:04:40,601 - INFO - __main__ - __main__ block started for PostgreSQL server.
2025-06-17 15:04:40,601 - INFO - __main__ - Configuring stdout/stdin for win32.
2025-06-17 15:04:40,601 - INFO - __main__ - stdout/stdin configured for win32.
2025-06-17 15:04:40,601 - INFO - __main__ - Starting MCP PostgreSQL Server (stdio)...
2025-06-17 15:04:40,607 - DEBUG - asyncio - Using proactor: IocpProactor
2025-06-17 15:04:40,613 - DEBUG - mcp.server.lowlevel.server - Received message: root=InitializedNotification(method='notifications/initialized', params=None, jsonrpc='2.0')
2025-06-17 15:04:40,613 - DEBUG - mcp.server.lowlevel.server - Received message: <mcp.shared.session.RequestResponder object at 0x0000021553AE82D0>
2025-06-17 15:04:40,613 - INFO - mcp.server.lowlevel.server - Processing request of type ListToolsRequest
2025-06-17 15:04:40,613 - DEBUG - mcp.server.lowlevel.server - Dispatching request of type ListToolsRequest
2025-06-17 15:04:40,613 - DEBUG - mcp.server.lowlevel.server - Response sent
2025-06-17 15:04:53,142 - DEBUG - mcp.server.lowlevel.server - Received message: <mcp.shared.session.RequestResponder object at 0x0000021553AE8CD0>
2025-06-17 15:04:53,142 - INFO - mcp.server.lowlevel.server - Processing request of type CallToolRequest
2025-06-17 15:04:53,142 - DEBUG - mcp.server.lowlevel.server - Dispatching request of type CallToolRequest
2025-06-17 15:04:53,143 - DEBUG - __main__ - Tool 'connect_to_postgres' called with connection_string: postgresql://postgres:postgresql@localhost:5432/codebase_community
2025-06-17 15:04:53,202 - INFO - __main__ - Successfully connected to PostgreSQL database.
2025-06-17 15:04:53,203 - DEBUG - mcp.server.lowlevel.server - Response sent
2025-06-17 15:04:53,204 - DEBUG - mcp.server.lowlevel.server - Received message: <mcp.shared.session.RequestResponder object at 0x0000021553AA09D0>
2025-06-17 15:04:53,205 - INFO - mcp.server.lowlevel.server - Processing request of type CallToolRequest
2025-06-17 15:04:53,205 - DEBUG - mcp.server.lowlevel.server - Dispatching request of type CallToolRequest
2025-06-17 15:04:53,205 - DEBUG - __main__ - Tool 'get_schema_and_sample_data' called.
2025-06-17 15:04:53,232 - DEBUG - __main__ - Found tables: ['badges', 'comments', 'postHistory', 'postLinks', 'posts', 'tags', 'users', 'votes']
2025-06-17 15:04:53,276 - INFO - __main__ - Successfully fetched schema and sample data for 8 tables.
2025-06-17 15:04:53,277 - DEBUG - mcp.server.lowlevel.server - Response sent
2025-06-17 15:08:43,523 - DEBUG - mcp.server.lowlevel.server - Received message: <mcp.shared.session.RequestResponder object at 0x0000021553AA0FC0>
2025-06-17 15:08:43,523 - INFO - mcp.server.lowlevel.server - Processing request of type CallToolRequest
2025-06-17 15:08:43,523 - DEBUG - mcp.server.lowlevel.server - Dispatching request of type CallToolRequest
2025-06-17 15:08:43,524 - DEBUG - __main__ - Tool 'execute_postgres_query' called with query: SELECT TagName, Count FROM tags ORDER BY Count DESC LIMIT 1;...
2025-06-17 15:08:43,531 - ERROR - __main__ - Error executing query: column "tagname" does not exist
LINE 1: SELECT TagName, Count FROM tags ORDER BY Count DESC LIMIT 1;
               ^
HINT:  Perhaps you meant to reference the column "tags.TagName".
Traceback (most recent call last):
  File "C:\Users\sgvya\OneDrive\Desktop\Postgres Copilot vector database addition\postgres_copilot\postgresql_server.py", line 138, in execute_postgres_query
    cur.execute(query)
    ~~~~~~~~~~~^^^^^^^
  File "C:\Users\sgvya\OneDrive\Desktop\Postgres Copilot vector database addition\postgres_copilot\.venv\Lib\site-packages\psycopg2\extras.py", line 236, in execute
    return super().execute(query, vars)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "tagname" does not exist
LINE 1: SELECT TagName, Count FROM tags ORDER BY Count DESC LIMIT 1;
               ^
HINT:  Perhaps you meant to reference the column "tags.TagName".

2025-06-17 15:08:43,549 - DEBUG - mcp.server.lowlevel.server - Response sent
2025-06-17 15:09:02,132 - DEBUG - mcp.server.lowlevel.server - Received message: <mcp.shared.session.RequestResponder object at 0x0000021553AD0DD0>
2025-06-17 15:09:02,132 - INFO - mcp.server.lowlevel.server - Processing request of type CallToolRequest
2025-06-17 15:09:02,132 - DEBUG - mcp.server.lowlevel.server - Dispatching request of type CallToolRequest
2025-06-17 15:09:02,132 - DEBUG - __main__ - Tool 'execute_postgres_query' called with query: SELECT "TagName", "Count" FROM tags ORDER BY "Count" DESC LIMIT 1;...
2025-06-17 15:09:02,137 - INFO - __main__ - Query executed successfully. Fetched 1 rows.
2025-06-17 15:09:02,137 - DEBUG - mcp.server.lowlevel.server - Response sent
2025-06-17 15:11:57,290 - DEBUG - mcp.server.lowlevel.server - Received message: <mcp.shared.session.RequestResponder object at 0x0000021553987BD0>
2025-06-17 15:11:57,290 - INFO - mcp.server.lowlevel.server - Processing request of type CallToolRequest
2025-06-17 15:11:57,290 - DEBUG - mcp.server.lowlevel.server - Dispatching request of type CallToolRequest
2025-06-17 15:11:57,291 - DEBUG - __main__ - Tool 'execute_postgres_query' called with query: SELECT "TagName", "Count", "ExcerptPostId" FROM tags ORDER BY "Count" DESC LIMIT 1;...
2025-06-17 15:11:57,291 - INFO - __main__ - Query executed successfully. Fetched 1 rows.
2025-06-17 15:11:57,292 - DEBUG - mcp.server.lowlevel.server - Response sent
